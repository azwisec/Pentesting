### API1:2019 - Broken Object Level Authorization<br>
Broken Object Level Authorization (BOLA) in API security is when a system doesn't properly check if a user is allowed to access certain data. <br>
Imagine you have a key that opens your house, but it also opens your neighbor's house. This is a problem because you should only be able to access your own house. <br>
In BOLA, the system mistakenly allows users to access other people's data, like being able to use your key to open someone elseâ€™s house. This can lead to unauthorized access to sensitive information.<br>


#### OWASP Description:<br>
APIs tend to expose endpoints that handle object identifiers, creating a wide attack surface Level Access Control issue. Object level authorization checks should be considered in every function that accesses a data source using an input from the user.<br>

## Lets Dive Deeply <br>
### What is BOLA?<br>
Broken Object Level Authorization (BOLA) occurs when an API fails to properly verify if a user has the rights to access a specific object (like data or a resource). In simpler terms, it's a security flaw where the system does not correctly check if a person should be allowed to see or modify certain information.<br>
Lets check example of  [**Tryhackme Lab**](https://tryhackme.com/r/room/owaspapisecuritytop105w)<br>
Bob is working as an API developer in Company MHT and developed an endpoint */apirule1/users/{ID}* that will allow other applications or developers to request information by sending an employee ID. In the VM, you can request results by sending GET requests to *http://localhost:80/MHT/apirule1_v/user/1*<br>
Here in the task they are asking very basics about like:<br>
What is the total number of employees by checking the employee ID with incrementing value. <br>
Answer is 3<br> We can simply check by changing the id to 1,2,3 etc. Once it finish it will show not found or some error response.<br>
Next it asking for flag associated with employee ID 2?
![screenshot of conversion](https://github.com/azwisec/Pentesting/blob/main/API-Testing/Top10-2019/Images/BOLA%201.webp)<br>
What is the username of employee ID 3?<br>
![screenshot of conversion](https://github.com/azwisec/Pentesting/blob/main/API-Testing/Top10-2019/Images/BOLA%203.webp)<br>

### Lets Dive in Very Simple. <br>
#### Real-World Analogy<br>
Imagine an apartment building where each tenant has a key to their own apartment. Now, think of what would happen if any tenant's key could open every other apartment. This is similar to what happens in a BOLA vulnerability: users can access data or resources they shouldn't be able to.

#### How It Happens in APIs<br>
1. User Requests Data: A user sends a request to an API to access specific data, such as their profile information.
2. API Responds: The API should check if the user has permission to access this data.
3. Authorization Failure: In the case of BOLA, the API does not properly verify the user's authorization and provides access to data that belongs to another user.<br><br>
[**Here's an example lab scenario to illustrate a Broken Object Level Authorization (BOLA) vulnerability.**](https://github.com/azwisec/Pentesting/blob/main/API-Testing/Top10-2019/Images/BOLALab.md)<br>

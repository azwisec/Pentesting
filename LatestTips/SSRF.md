Header modification results in disclosure of Slack infra metadata to unauthorized parties
Report: https://hackerone.com/reports/727330
Found files.slack.com domain will honor the X-Forwarded-Host header, instead of host header

Reproduce steps:
1. Upload a file onto the slack, find the original image path via Open original. Intercept this original path (i.e. https://files.slack.com/files-pri/TNXC4JD70-FPSL307RB/test.png) on burp suite
2. Send to repeater, make sure it works fine by clicking send directly
3. Add a header X-Forwarded-Host: xxx.com, make sure server returned 500 error
4. Update header to X-Forwarded-Host: files.slack.com@YOUR_DOMAIN, make sure server response with 302, and the location is YOUR_DOMAIN/files-pri/....
5. Make sure the request did sent to your domain, and the server is from xxx.amazonaws.com
6. change YOUR_DOMAIN into intranet ip, ex: 169.254.169.254:PORT, change the port to check the response delay time.
Here's the demo video: https://youtu.be/j5_WicLwwC4
